<!-- Descomentar cuando se tenga el proyecto completo para que se cree el layout dinamicamente -->
<!--@{
    ViewBag.Title = "Dashboard Cl√≠nico";
    Layout = "~/Views/Shared/_LayoutClinico.cshtml";
}-->
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Dashboard Cl√≠nico - MediSoft</title>

    <!-- Favicons -->
    <link href="../../assets/img/favicon.png" rel="icon">
    <link href="../../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../../assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="../../assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="../../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link href="../../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="../../assets/css/main.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">


    <style>
        body {
            background-color: #f8f9fa;
        }

        .progress-bar {
            transition: width 0.5s ease-in-out;
        }

        .checklist-container {
            max-width: 600px;
            margin: 40px auto;
        }

        .estado-box {
            border-left: 5px solid #0d6efd;
            background-color: #fff;
            padding: 1rem;
            border-radius: .5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }

            .estado-box h5 {
                color: #0d6efd;
                margin-bottom: 0.5rem;
            }

        .alerta-roja {
            border-left-color: #dc3545 !important;
        }

        .alerta-verde {
            border-left-color: #198754 !important;
        }

    </style>

</head>
<body class="index-page">
    <header id="header" class="header d-flex align-items-center fixed-top">
        <div class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

            <a href="dashboard-recepcion.html" class="logo d-flex align-items-center me-auto me-xl-0">
                <svg class="my-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="bgCarrier" stroke-width="0"></g>
                    <g id="tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="iconCarrier">
                        <path d="M22 22L2 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
                        <path d="M17 22V6C17 4.11438 17 3.17157 16.4142 2.58579C15.8284 2 14.8856 2 13 2H11C9.11438 2 8.17157 2 7.58579 2.58579C7 3.17157 7 4.11438 7 6V22" stroke="currentColor" stroke-width="1.5"></path>
                        <path opacity="0.5" d="M21 22V8.5C21 7.09554 21 6.39331 20.6629 5.88886C20.517 5.67048 20.3295 5.48298 20.1111 5.33706C19.6067 5 18.9045 5 17.5 5" stroke="currentColor" stroke-width="1.5"></path>
                        <path opacity="0.5" d="M3 22V8.5C3 7.09554 3 6.39331 3.33706 5.88886C3.48298 5.67048 3.67048 5.48298 3.88886 5.33706C4.39331 5 5.09554 5 6.5 5" stroke="currentColor" stroke-width="1.5"></path>
                        <path d="M12 22V19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
                    </g>
                </svg>
                <h1 class="sitename">MediSoft</h1>
            </a>

            <nav id="navmenu" class="navmenu">
                <ul>
                    <li><a href="dashboard-recepcion.html" class="active"><i class="bi bi-grid-fill me-1"></i> Dashboard</a></li>
                    <li><a href="#"><i class="bi bi-calendar-range-fill me-1"></i> Agenda General</a></li>
                    <li><a href="#"><i class="bi bi-exclamation-triangle-fill me-1"></i> Alertas</a></li>
                    <li><a href="#"><i class="bi bi-check2-square me-1"></i> Mis Tareas</a></li>
                    <li><a href="../planes/gestion-planes.html"><i class="bi bi-box-arrow-in-down me-1"></i> Gesti√≥n Planes</a></li>
                    <li class="dropdown position-relative">
                        <a href="#">
                            <i class="bi bi-bell-fill fs-5"></i>
                            <span class="notification-badge"></span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><h6 class="dropdown-header">Notificaciones</h6></li>
                            <li><hr class="dropdown-divider"></li>
                            <li class="dropdown-item d-flex align-items-start">
                                <i class="bi bi-info-circle text-primary me-2 mt-1"></i>
                                <div>
                                    <h6>Nueva Tarea Asignada</h6>
                                    <p class="small text-muted mb-0">Dr. Rivera te asign√≥: "Llamar a paciente Ana Fuentes".</p>
                                    <p class="small text-muted mb-0">Hace 5 minutos</p>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#"><i class="bi bi-person-circle me-1"></i><span>Carlos Soto</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                        <ul>
                            <li><a href="#">Mi Perfil</a></li>
                            <li><a href="../account/login.html">Cerrar Sesi√≥n</a></li>
                        </ul>
                    </li>
                </ul>
                <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
            </nav>

        </div>
    </header>

    <main class="main" style="margin-top: 80px;">

        <div class="container checklist-container">
            <h2 class="mb-4 text-center text-dark">Checklist Prequir√∫rgico</h2>

            <!-- Plantillas asociadas y edici√≥n -->
            <div class="estado-box">
                <h5>Gesti√≥n de plantillas</h5>
                <p>Plantilla asociada a cirug√≠a: Colecistectom√≠a laparosc√≥pica</p>
                <button class="btn btn-outline-primary btn-sm">Duplicar plantilla existente</button>
                <button class="btn btn-outline-secondary btn-sm">Ver historial de ediciones</button>
            </div>

            <!-- Selecci√≥n de Paciente y Plantilla -->
            <div class="estado-box">
                <h5>Paciente con cirug√≠a programada</h5>
                <p><strong>Acci√≥n:</strong> Plantilla prequir√∫rgica seleccionada</p>
                <div class="mb-2"><strong>Nombre:</strong> Ana Rodr√≠guez</div>
                <div><strong>Identificaci√≥n:</strong> 204560938</div>
                <div class="form-floating mt-3">
                    <textarea class="form-control" placeholder="Notas adicionales..." id="notas"></textarea>
                    <label for="notas">Notas adicionales</label>
                </div>
            </div>

            <!-- Indicador visual de progreso -->
            <div class="mb-4">
                <label class="form-label">Preparaci√≥n del paciente</label>
                <div class="progress">
                    <div id="progressBar" class="progress-bar bg-success" style="width: 0%;">0%</div>
                </div>
            </div>

            <form id="checklistForm">
                <div class="form-check mb-3">
                    <input class="form-check-input checklist-item" type="checkbox" id="consentimiento" required>
                    <label class="form-check-label" for="consentimiento">Consentimiento informado firmado</label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input checklist-item" type="checkbox" id="examenes">
                    <label class="form-check-label" for="examenes">Ex√°menes de laboratorio entregados</label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input checklist-item" type="checkbox" id="ayuno">
                    <label class="form-check-label" for="ayuno">Ayuno confirmado (m√≠nimo 8 horas)</label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input checklist-item" type="checkbox" id="medicacion">
                    <label class="form-check-label" for="medicacion">Medicaci√≥n preoperatoria administrada</label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input checklist-item" type="checkbox" id="ropa">
                    <label class="form-check-label" for="ropa">Ropa quir√∫rgica entregada</label>
                </div>

                <div class="form-check mb-4">
                    <input class="form-check-input checklist-item" type="checkbox" id="evaluacion">
                    <label class="form-check-label" for="evaluacion">Evaluaci√≥n preanest√©sica completada</label>
                </div>

                <div class="d-grid gap-2">
                    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#mensajeModal">
                        Confirmar Checklist
                    </button>
                    <button type="button" class="btn btn-outline-primary" onclick="crearPlantilla()">Crear Nueva Plantilla</button>
                    <button type="button" class="btn btn-outline-secondary" onclick="exportarPDF()">Exportar a PDF</button>
                </div>
            </form>

            <!-- Modal de mensaje -->
            <div class="modal fade" id="mensajeModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header bg-success text-white">
                            <h5 class="modal-title" id="modalLabel">‚úÖ Checklist enviado con √©xito</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                        </div>
                        <div class="modal-body">
                            El protocolo ha sido marcado como cumplido. Se ha enviado notificaci√≥n al equipo m√©dico.
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerta por checklist incompleto -->
            <div class="estado-box alerta-roja">
                <h5>Checklist incompleto a 24h</h5>
                <p><strong>Encabezado del correo:</strong> Alerta: existen √≠tems pendientes</p>
                <p><strong>Cuerpo:</strong> Por favor, atender en un plazo de 24 horas antes de su cita.</p>
            </div>

            <!-- Historial y consultas -->
            <div class="estado-box">
                <h5>Historial de procedimientos</h5>
                <ul class="list-group">
                    <li class="list-group-item">Cirug√≠a - Septiembre 2023 <span class="badge bg-success float-end">Checklist completo</span></li>
                    <li class="list-group-item">Cirug√≠a - Enero 2024 <span class="badge bg-danger float-end">Checklist incompleto</span></li>
                </ul>
            </div>

            <!-- Consentimiento obligatorio -->
            <div class="estado-box alerta-roja">
                <h5>Consentimiento obligatorio</h5>
                <p>Consentimiento firmado es requerido. No se puede cerrar el checklist sin este paso.</p>
                <button class="btn btn-outline-success btn-sm">Firmar electr√≥nicamente</button>
            </div>

            <!-- Laboratorio y resultados -->
            <div class="estado-box">
                <h5>Resultados de laboratorio</h5>
                <p>PDF adjunto disponible.</p>
                <button class="btn btn-outline-secondary btn-sm">Ver resultado</button>
            </div>

            <!-- Permisos de usuario -->
            <div class="estado-box alerta-roja">
                <h5>Acceso denegado</h5>
                <p>Acci√≥n no permitida, consulte con su administrador.</p>
            </div>

            <!-- Env√≠o de checklist -->
            <div class="estado-box">
                <h5>Checklist enviado</h5>
                <p>üì§ Correo enviado exitosamente el 02/08/2025 a las 15:00 por <strong>Enfermero Carlos Soto</strong></p>
            </div>

        </div>

    </main>
    <footer id="footer" class="footer position-relative light-background">
        <div class="container copyright text-center mt-4">
            <p>¬© <span>Copyright</span> <strong class="px-1 sitename">MediSoft</strong> <span>Todos los Derechos Reservados</span></p>
            <div class="credits">
                Dise√±ado por <a href="#">G1_SC-603</a>
            </div>
        </div>
    </footer>

    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <div id="preloader"></div>

    <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/vendor/aos/aos.js"></script>
    <script src="../../assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="../../assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="../../assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="../../assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="../../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>

    <script src="../../assets/js/main.js"></script>

    <script>
        const checklistItems = document.querySelectorAll('.checklist-item');
        const progressBar = document.getElementById('progressBar');

        checklistItems.forEach(item => {
            item.addEventListener('change', actualizarProgreso);
        });

        function actualizarProgreso() {
            const total = checklistItems.length;
            const completados = [...checklistItems].filter(i => i.checked).length;
            const porcentaje = Math.round((completados / total) * 100);
            progressBar.style.width = porcentaje + '%';
            progressBar.textContent = porcentaje + '%';
        }

        function crearPlantilla() {
            alert("Funcionalidad para crear nueva plantilla: ¬°pr√≥ximamente implementada!");
            // Funcion plantilla nueva
        }

        function exportarPDF() {
            alert("Exportar a PDF: puedes usar libs como html2pdf.js o jspdf para esta funcionalidad.");
            // L√≥gica con html2pdf.js o similar
        }
    </script>
</body>
