<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Cambiar Contraseña - Medisoft</title>

  <!-- Favicons -->
  <link href="../../assets/img/favicon.png" rel="icon">
  <link href="../../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Vendor CSS Files (Rutas Corregidas) -->
  <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">

  <!-- Main CSS File (Ruta Corregida) -->
  <link href="../../assets/css/main.css" rel="stylesheet">

</head>

<body class="login-body">

  <main>
    <div class="container login-container">
      <div class="card login-card p-4 p-md-5">
        <div class="login-header">
          <svg class="my-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
             <g id="iconCarrier">
                <path d="M22 22L2 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
                <path d="M17 22V6C17 4.11438 17 3.17157 16.4142 2.58579C15.8284 2 14.8856 2 13 2H11C9.11438 2 8.17157 2 7.58579 2.58579C7 3.17157 7 4.11438 7 6V22" stroke="currentColor" stroke-width="1.5"></path>
                <path opacity="0.5" d="M21 22V8.5C21 7.09554 21 6.39331 20.6629 5.88886C20.517 5.67048 20.3295 5.48298 20.1111 5.33706C19.6067 5 18.9045 5 17.5 5" stroke="currentColor" stroke-width="1.5"></path>
                <path opacity="0.5" d="M3 22V8.5C3 7.09554 3 6.39331 3.33706 5.88886C3.48298 5.67048 3.67048 5.48298 3.88886 5.33706C4.39331 5 5.09554 5 6.5 5" stroke="currentColor" stroke-width="1.5"></path>
                <path d="M12 22V19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </g>
          </svg>
          <h1 class="sitename">MediSoft</h1>
        </div>
        <h3 class="text-center mb-4">Establecer Nueva Contraseña</h3>
        <p class="text-center text-muted small">Por seguridad, debe cambiar su contraseña temporal.</p>
        <form id="changePasswordForm">
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="new-password" required>
            <label for="new-password">Nueva Contraseña</label>
          </div>
          <div class="form-floating mb-4">
            <input type="password" class="form-control" id="confirm-password" required>
            <label for="confirm-password">Confirmar Nueva Contraseña</label>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-ingresar">Actualizar Contraseña</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <script>
    document.getElementById('changePasswordForm').addEventListener('submit', function(event) {
      event.preventDefault();

      // Leer el correo electrónico de la URL
      const urlParams = new URLSearchParams(window.location.search);
      const email = urlParams.get('email').toLowerCase();

      // Lógica de redirección basada en el correo
      if (email === 'recepcion@doctorrivera.com') {
        window.location.href = '../dashboards/dashboard-recepcion.php';
      } else if (email === 'cirujano@doctorrivera.com') {
        // Asegúrate de crear este archivo en la carpeta dashboards
        window.location.href = '../dashboards/dashboard-clinico.php';
      } else if (email === 'admin@doctorrivera.com') {
        // Asegúrate de crear este archivo en la carpeta dashboards
        window.location.href = '../dashboards/dashboard-director.php';
      } 
    });
  </script>

</body>
</html>
